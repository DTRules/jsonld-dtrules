<!DOCTYPE html>

<html>
<head>
  <title>jld_util.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>jld_util.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="comment">/*jslint node: true, vars: true */</span>
<span class="string">'use strict'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h1>JSON LD Access Utilities</h1>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="keyword">var</span> u = require(<span class="string">'underscore'</span>);
<span class="keyword">var</span> idVal = -<span class="number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p><strong>createV</strong> - Create a value object; there are two forms:</p>
<ul>
<li><strong>createV(value)</strong> - create a value object with only an @value property</li>
<li><strong>createV(type, value)</strong> - create a value object with an @type and @value property</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">createV</span><span class="params">(p1, p2)</span> {</span>
    <span class="keyword">switch</span> (arguments.length) {
    <span class="keyword">case</span> <span class="number">1</span>:
        <span class="keyword">return</span> {
            <span class="string">"@value"</span>: p1
        };
    <span class="keyword">case</span> <span class="number">2</span>:
        <span class="keyword">return</span> {
            <span class="string">"@type"</span>: p1,
            <span class="string">"@value"</span>: p2
        };
    }
    <span class="keyword">return</span>;
} <span class="comment">//createV</span></pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p><strong>createN</strong> - create a node with @id and @type properties; two forms are supported:</p>
<ul>
<li><strong>createN(type)</strong> - generates a blank node unique with the process</li>
<li><strong>createN(id, type)</strong></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">createN</span><span class="params">(p1, p2)</span> {</span>
    <span class="keyword">switch</span> (arguments.length) {
    <span class="keyword">case</span> <span class="number">1</span>:
        idVal += <span class="number">1</span>;
        <span class="keyword">return</span> {
            <span class="string">"@id"</span>: <span class="string">'_:jld_util'</span> + idVal,
            <span class="string">"@type"</span>: p1
        };
    <span class="keyword">case</span> <span class="number">2</span>:
        <span class="keyword">return</span> {
            <span class="string">"@id"</span>: p1,
            <span class="string">"@type"</span>: p2
        };
    }
} <span class="comment">//createN</span></pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p><strong>createL</strong> - create a list with the array value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">createL</span><span class="params">(array)</span> {</span>
    <span class="keyword">return</span> {
        <span class="string">"@list"</span>: [array]
    };
} <span class="comment">//createL</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p><strong>getV</strong> - return the value of a value object or a singelton array; two forms are supported:</p>
<ul>
<li><strong>getV(valueObject)</strong> - may also be a singelton array with a value or value object</li>
<li><strong>getV(valueObjectArray)</strong> - the value object array 
is assumed to be a singelton array</li>
<li><strong>getV(node, propertyName)</strong> - the property value is 
assumed to be a singelton array containing either a value or value object</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">getV</span><span class="params">(p1, p2)</span> {</span>
    <span class="keyword">switch</span> (arguments.length) {
    <span class="keyword">case</span> <span class="number">1</span>:
        <span class="keyword">if</span> (p1) {
            <span class="keyword">if</span> (p1[<span class="number">0</span>]) {
                <span class="keyword">if</span> (p1[<span class="number">0</span>][<span class="string">"@value"</span>]) {
                    <span class="keyword">return</span> p1[<span class="number">0</span>][<span class="string">"@value"</span>];
                } <span class="keyword">else</span> {
                    <span class="keyword">return</span> p1[<span class="number">0</span>];
                }
            } <span class="keyword">else</span> <span class="keyword">if</span> (p1[<span class="string">"@value"</span>]) {
                <span class="keyword">return</span> p1[<span class="string">"@value"</span>];
            }
        }
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="number">2</span>:
        <span class="keyword">if</span> (p1) {
            <span class="keyword">if</span> (p1[p2]) {
                <span class="keyword">if</span> (p1[p2][<span class="number">0</span>]) {
                    <span class="keyword">if</span> (p1[p2][<span class="number">0</span>][<span class="string">"@value"</span>]) {
                        <span class="keyword">return</span> p1[p2][<span class="number">0</span>][<span class="string">"@value"</span>];
                    } <span class="keyword">else</span> {
                        <span class="keyword">return</span> p1[p2][<span class="number">0</span>];
                    }
                }
            }
        }
        <span class="keyword">break</span>;
    }
} <span class="comment">//getV</span></pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p><strong>getA</strong> - get the array value of a node&#39;s set or list property</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">getA</span><span class="params">(node, propertyName)</span> {</span>
    <span class="keyword">var</span> val = node[propertyName];
    <span class="keyword">if</span> (node) {
        <span class="keyword">if</span> (node[propertyName]) {
            <span class="keyword">if</span> (node[propertyName][<span class="string">"@list"</span>]) {
                <span class="keyword">return</span> node[propertyName][<span class="string">"@list"</span>];
            } <span class="keyword">else</span> {
                <span class="keyword">return</span> node[propertyName];
            }
        }
    }
} <span class="comment">//getA</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p><strong>getN</strong> - get the node value of a node property
(expand turns all singelton node values into singelton arrays)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">getN</span><span class="params">(node, propertyName)</span> {</span>
    <span class="keyword">var</span> val = node[propertyName];
    <span class="keyword">if</span> (val) {
        <span class="keyword">if</span> (val[<span class="number">0</span>]) {
            <span class="keyword">return</span> val[<span class="number">0</span>];
        }
    }
} <span class="comment">//getN</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p><strong>getI</strong> - get the @id of a node</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">getI</span><span class="params">(node)</span> {</span>
    <span class="keyword">if</span> (node) {
        <span class="keyword">if</span> (node[<span class="string">"@id"</span>]) {
            <span class="keyword">return</span> node[<span class="string">"@id"</span>];
        }
    }
} <span class="comment">//getI</span></pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p><strong>setV</strong> - set a value object value; two forms are supported:</p>
<ul>
<li><strong>setV(valueObject, value)</strong> - may also set the value of a singelton array of a value object or a value</li>
<li><strong>setV(node, propertyName, value)</strong> - where the node property is a 
singelton array ov value object; if the property is undefined, 
it is created; if a value object already exists, its @value is 
set an its @type is retained</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">setV</span><span class="params">(p1, p2, p3)</span> {</span>
    <span class="keyword">switch</span> (arguments.length) {
    <span class="keyword">case</span> <span class="number">2</span>:
        <span class="keyword">if</span> (p1) {
            <span class="keyword">if</span> (p1[<span class="number">0</span>]) {
                <span class="keyword">if</span> (p1[<span class="number">0</span>][<span class="string">"@value"</span>]) {
                    p1[<span class="number">0</span>][<span class="string">"@value"</span>] = p2;
                } <span class="keyword">else</span> {
                    p1[<span class="number">0</span>] = p2;
                }
            } <span class="keyword">else</span> {
                <span class="keyword">if</span> (p1[<span class="string">"@value"</span>]) {
                    p1[<span class="string">"@value"</span>] = p2;
                }
            }
        }
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="number">3</span>:
        <span class="keyword">if</span> (p1) {
            <span class="keyword">if</span> (p1[p2]) {
                <span class="keyword">if</span> (p1[p2][<span class="number">0</span>]) {
                    <span class="keyword">if</span> (p1[p2][<span class="string">"@value"</span>]) {
                        p1[p2][<span class="number">0</span>][<span class="string">"@value"</span>] = p3;
                    } <span class="keyword">else</span> {
                        p1[p2][<span class="number">0</span>] = p3;
                    }
                } <span class="keyword">else</span> {
                    p1[p2] = [p3];
                }
            } <span class="keyword">else</span> {
                p1[p2] = [p3];
            }
        }
        <span class="keyword">break</span>;
    }
} <span class="comment">//setV</span></pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p><strong>setN</strong> - set a node property to a node; the node is wrapped in an array to 
agree with the form of expanded singelton node values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">setN</span><span class="params">(node, propertyName, newNode)</span> {</span>
    node[propertyName] = [newNode];
} <span class="comment">//setN</span></pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p><strong>setL</strong> - set a node list property to an array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">setL</span><span class="params">(node, propertyName, newArray)</span> {</span>
    <span class="keyword">if</span> (node) {
        node[propertyName] = {
            <span class="string">"@list"</span>: newArray
        };
    }
} <span class="comment">//setL</span></pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p><strong>setS</strong> - set a node set property to an array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">setS</span><span class="params">(node, propertyName, array)</span> {</span>
    <span class="keyword">if</span> (node) {
        node[propertyName] = array;
    }
} <span class="comment">//setS</span></pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p><strong>addTo</strong> - add the amount to the value; three forms are supported:</p>
<ul>
<li><strong>addTo(valueObject, amount)</strong> - both value object and singelton 
array of value object and value are supported</li>
<li><strong>addTo(node, propertyName, amount)</strong> - the property can be a 
singelton array of value or value object; if the property does not exist, 
it is added with a singelton array containing the value</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">addTo</span><span class="params">(p1, p2, p3)</span> {</span>
    <span class="keyword">switch</span> (arguments.length) {
    <span class="keyword">case</span> <span class="number">2</span>:
        <span class="keyword">if</span> (<span class="keyword">typeof</span> p2 === <span class="string">'number'</span>) {
            <span class="keyword">if</span> (p1) {
                <span class="keyword">if</span> (p1[<span class="number">0</span>]) {
                    <span class="keyword">if</span> (p1[<span class="number">0</span>][<span class="string">"@value"</span>]) {
                        <span class="keyword">if</span> (<span class="keyword">typeof</span> p1[<span class="number">0</span>][<span class="string">"@value"</span>] === <span class="string">'number'</span>) {
                            p1[<span class="number">0</span>][<span class="string">"@value"</span>] += p2;
                        }
                    } <span class="keyword">else</span> {
                        <span class="keyword">if</span> (<span class="keyword">typeof</span> p1[<span class="number">0</span>] === <span class="string">'number'</span>) {
                            p1[<span class="number">0</span>] += p2;
                        }
                    }
                } <span class="keyword">else</span> {
                    <span class="keyword">if</span> (p1[<span class="string">"@value"</span>]) {
                        <span class="keyword">if</span> (<span class="keyword">typeof</span> p1[<span class="string">"@value"</span>] === <span class="string">'number'</span>) {
                            p1[<span class="string">"@value"</span>] += p2;
                        }
                    }
                }
            }
        }
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="number">3</span>:
        <span class="keyword">if</span> (<span class="keyword">typeof</span> p3 === <span class="string">'number'</span>) {
            <span class="keyword">if</span> (p1) {
                <span class="keyword">if</span> (p1[p2]) {
                    <span class="keyword">if</span> (p1[p2][<span class="number">0</span>]) {
                        <span class="keyword">if</span> (p1[p2][<span class="number">0</span>][<span class="string">"@value"</span>]) {
                            <span class="keyword">if</span> (<span class="keyword">typeof</span> p1[p2][<span class="number">0</span>][<span class="string">"@value"</span>] === <span class="string">'number'</span>) {
                                p1[p2][<span class="number">0</span>][<span class="string">"@value"</span>] += p3;
                            }
                        } <span class="keyword">else</span> {
                            <span class="keyword">if</span> (<span class="keyword">typeof</span> p1[p2][<span class="number">0</span>] === <span class="string">'number'</span>) {
                                p1[p2][<span class="number">0</span>] += p3;
                            }
                        }

                    }
                } <span class="keyword">else</span> {
                    p1[p2] = [p3];
                }
            }
        }
        <span class="keyword">break</span>;
    }
} <span class="comment">//addTo</span></pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p><strong>subFrom</strong> - subtract the amount from the value; three forms are supported:</p>
<ul>
<li><strong>subFrom(valueObject, amount)</strong> - both value object and singelton 
array of value object and value are supported</li>
<li><strong>subFrom(node, propertyName, amount)</strong> - the property can be a 
singelton array of value or value object; if the property does not exist, 
it is added with a singelton array containing the negative of the value</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">subFrom</span><span class="params">(p1, p2, p3)</span> {</span>
    <span class="keyword">switch</span> (arguments.length) {
    <span class="keyword">case</span> <span class="number">2</span>:
        <span class="keyword">if</span> (<span class="keyword">typeof</span> p2 === <span class="string">'number'</span>) {
            <span class="keyword">if</span> (p1) {
                <span class="keyword">if</span> (p1[<span class="number">0</span>]) {
                    <span class="keyword">if</span> (p1[<span class="number">0</span>][<span class="string">"@value"</span>]) {
                        <span class="keyword">if</span> (<span class="keyword">typeof</span> p1[<span class="number">0</span>][<span class="string">"@value"</span>] === <span class="string">'number'</span>) {
                            p1[<span class="number">0</span>][<span class="string">"@value"</span>] -= p2;
                        }
                    } <span class="keyword">else</span> {
                        <span class="keyword">if</span> (<span class="keyword">typeof</span> p1[<span class="number">0</span>] === <span class="string">'number'</span>) {
                            p1[<span class="number">0</span>] -= p2;
                        }
                    }
                } <span class="keyword">else</span> {
                    <span class="keyword">if</span> (p1[<span class="string">"@value"</span>]) {
                        <span class="keyword">if</span> (<span class="keyword">typeof</span> p1[<span class="string">"@value"</span>] === <span class="string">'number'</span>) {
                            p1[<span class="string">"@value"</span>] -= p2;
                        }
                    }
                }
            }
        }
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="number">3</span>:
        <span class="keyword">if</span> (<span class="keyword">typeof</span> p3 === <span class="string">'number'</span>) {
            <span class="keyword">if</span> (p1) {
                <span class="keyword">if</span> (p1[p2]) {
                    <span class="keyword">if</span> (p1[p2][<span class="number">0</span>]) {
                        <span class="keyword">if</span> (p1[p2][<span class="number">0</span>][<span class="string">"@value"</span>]) {
                            <span class="keyword">if</span> (<span class="keyword">typeof</span> p1[p2][<span class="number">0</span>][<span class="string">"@value"</span>] === <span class="string">'number'</span>) {
                                p1[p2][<span class="number">0</span>][<span class="string">"@value"</span>] -= p3;
                            }
                        } <span class="keyword">else</span> {
                            <span class="keyword">if</span> (<span class="keyword">typeof</span> p1[p2][<span class="number">0</span>] === <span class="string">'number'</span>) {
                                p1[p2][<span class="number">0</span>] -= p3;
                            }
                        }

                    }
                } <span class="keyword">else</span> {
                    p1[p2] = [-p3];
                }
            }
        }
        <span class="keyword">break</span>;
    }
} <span class="comment">//subFrom</span></pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p><strong>equalV</strong> - return true if a value object&#39;s @value  matches the value; two forms are supported:</p>
<ul>
<li><strong>equalV(valueObject, value)</strong> - both value object and singelton array of value object and value are supported</li>
<li><strong>equalV(node, parameterName, value)</strong></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">equalV</span><span class="params">(p1, p2, p3)</span> {</span>
    <span class="keyword">switch</span> (arguments.length) {
    <span class="keyword">case</span> <span class="number">2</span>:
        <span class="keyword">if</span> (p1) {
            <span class="keyword">if</span> (p1[<span class="string">"@value"</span>]) {
                <span class="keyword">return</span> (p1[<span class="string">"@value"</span>] === p2);
            }
            <span class="keyword">if</span> (p1[<span class="number">0</span>]) {
                <span class="keyword">if</span> (p1[<span class="number">0</span>][<span class="string">"@value"</span>]) {
                    <span class="keyword">return</span> (p1[<span class="number">0</span>][<span class="string">"@value"</span>] === p2);
                } <span class="keyword">else</span> {
                    <span class="keyword">return</span> (p1[<span class="number">0</span>] === p2);
                }
            }
        }
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="number">3</span>:
        <span class="keyword">if</span> (p1) {
            <span class="keyword">if</span> (p1[p2]) {
                <span class="keyword">if</span> (p1[p2][<span class="number">0</span>]) {
                    <span class="keyword">if</span> (p1[p2][<span class="number">0</span>][<span class="string">"@value"</span>]) {
                        <span class="keyword">return</span> (p1[p2][<span class="number">0</span>][<span class="string">"@value"</span>] === p3);
                    } <span class="keyword">else</span> {
                        <span class="keyword">return</span> (p1[p2][<span class="number">0</span>] === p3);
                    }
                }
            }
        }
        <span class="keyword">break</span>;
    }
} <span class="comment">//equalV</span></pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p><strong>equalN</strong> true if both nodes have the same @id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">equalN</span><span class="params">(node1, node2)</span> {</span>
    <span class="keyword">if</span> (node1 &amp;&amp; node2) {
        <span class="keyword">if</span> (node1[<span class="string">"@id"</span>] &amp;&amp; node2[<span class="string">"@id"</span>]) {
            <span class="keyword">if</span> ((<span class="keyword">typeof</span> node1[<span class="string">"@id"</span>] === <span class="string">'string'</span>) &amp;&amp; (<span class="keyword">typeof</span> node2[<span class="string">"@id"</span>] === <span class="string">'string'</span>)) {
                <span class="keyword">return</span> (node1[<span class="string">"@id"</span>] === node2[<span class="string">"@id"</span>]);
            }
        }
    }
} <span class="comment">//equalN</span></pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p><strong>pushL</strong> - append a node to the end of a list; two forms are supported:</p>
<ul>
<li><strong>pushL(list, newNode)</strong></li>
<li><strong>pushL(node, parameterName, newNode)</strong> - if the property does not exist, 
a list property initialized to the value is added</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">pushL</span><span class="params">(p1, p2, p3)</span> {</span>
    <span class="keyword">switch</span> (arguments.length) {
    <span class="keyword">case</span> <span class="number">2</span>:
        <span class="keyword">if</span> (p1) {
            <span class="keyword">if</span> (p1[<span class="string">"@list"</span>]) {
                p1[<span class="string">"@list"</span>].push(p2);
            }
        }
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="number">3</span>:
        <span class="keyword">if</span> (p1) {
            <span class="keyword">if</span> (p1[p2]) {
                <span class="keyword">if</span> (p1[p2][<span class="string">"@list"</span>]) {
                    p1[p2][<span class="string">"@list"</span>].push(p3);
                }
            } <span class="keyword">else</span> {
                p1[p2] = {
                    <span class="string">"@list"</span>: [p3]
                };
            }
        }
        <span class="keyword">break</span>;
    }
} <span class="comment">//pushL</span></pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p><strong>applyFunc</strong> - apply a function to each element of an array; three forms are supported</p>
<ul>
<li><strong>applyFunc(array, Func)</strong></li>
<li><strong>applyFunc(list, Func)</strong></li>
<li><strong>applyFunc(node, propertyName, Func)</strong> - for a set or list</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">applyFunc</span><span class="params">(p1, p2, p3)</span> {</span>
    <span class="keyword">var</span> i;
    <span class="keyword">switch</span> (arguments.length) {
    <span class="keyword">case</span> <span class="number">2</span>:
        <span class="keyword">if</span> (<span class="keyword">typeof</span> p2 === <span class="string">'function'</span>) {
            <span class="keyword">if</span> (p1) {
                <span class="keyword">if</span> (p1[<span class="string">"@list"</span>]) {
                    <span class="keyword">if</span> (p1[<span class="string">"@list"</span>].length) {
                        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; p1[<span class="string">"@list"</span>].length; i += <span class="number">1</span>) {
                            p2(p1[<span class="string">"@list"</span>][i]);
                        }
                    }
                } <span class="keyword">else</span> <span class="keyword">if</span> (p1.length) {
                    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; p1.length; i += <span class="number">1</span>) {
                        p2(p1[i]);
                    }
                }
            }
        }
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="number">3</span>:
        <span class="keyword">if</span> (<span class="keyword">typeof</span> p3 === <span class="string">'function'</span>) {
            <span class="keyword">if</span> (p1) {
                <span class="keyword">if</span> (p1[p2]) {
                    <span class="keyword">if</span> (p1[p2][<span class="string">"@list"</span>]) {
                        <span class="keyword">if</span> (p1[p2][<span class="string">"@list"</span>].length) {
                            <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; p1[p2][<span class="string">"@list"</span>].length; i += <span class="number">1</span>) {
                                p3(p1[p2][<span class="string">"@list"</span>][i]);
                            }
                        }
                    } <span class="keyword">else</span> <span class="keyword">if</span> (p1[p2].length) {
                        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; p1[p2].length; i += <span class="number">1</span>) {
                            p3(p1[p2][i]);
                        }
                    }
                }
            }
        }
        <span class="keyword">break</span>;
    }
} <span class="comment">//applyFunc</span></pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p><strong>isIn</strong> - returns true if the value is in the array; the array may also be an array of value objects</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">isIn</span><span class="params">(array, value)</span> {</span>
    <span class="keyword">var</span> found, i;
    <span class="keyword">if</span> (array) {
        <span class="keyword">if</span> (array[<span class="number">0</span>]) {
            <span class="keyword">if</span> (array[<span class="number">0</span>][<span class="string">"@value"</span>]) {
                <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; array.length; i += <span class="number">1</span>) {
                    <span class="keyword">if</span> (array[i][<span class="string">"@value"</span>] === value) {
                        <span class="keyword">return</span> <span class="literal">true</span>;
                    }
                }
            } <span class="keyword">else</span> {
                <span class="keyword">return</span> (u.indexOf(array, value) !== -<span class="number">1</span>);
            }
        }
    }
} <span class="comment">//isIn</span></pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p><strong>isType</strong> returns true if the type of the node or value matches the type specified; 
three forms are supported:</p>
<ul>
<li><strong>isType(valueObject, type)</strong> - type may be a single type or an array of types</li>
<li><strong>isType(node, type)</strong> - type may be a single type or an array of types</li>
<li><strong>isType(node, propertyName, type)</strong> - the property may be a singelton node array or 
a singelton value object array; type may be a single type or an array of types</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="function"><span class="keyword">function</span> <span class="title">isType</span><span class="params">(p1, p2, p3)</span> {</span>
    <span class="keyword">var</span> types, testTypes;
    <span class="keyword">var</span> i;
    <span class="keyword">switch</span> (arguments.length) {
    <span class="keyword">case</span> <span class="number">2</span>:
        <span class="keyword">if</span> (<span class="keyword">typeof</span> p2 === <span class="string">'string'</span>) {
            testTypes = [p2];
        } <span class="keyword">else</span> <span class="keyword">if</span> (p2.length) {
            testTypes = p2;
        } <span class="keyword">else</span> {
            <span class="keyword">return</span>;
        }
        <span class="keyword">if</span> (p1) {
            <span class="keyword">if</span> (p1[<span class="string">"@type"</span>]) {
                <span class="keyword">if</span> (<span class="keyword">typeof</span> p1[<span class="string">"@type"</span>] === <span class="string">'string'</span>) {
                    types = [p1[<span class="string">"@type"</span>]];
                } <span class="keyword">else</span> <span class="keyword">if</span> (p1[<span class="string">"@type"</span>].length) {
                    types = p1[<span class="string">"@type"</span>];
                }
            } <span class="keyword">else</span> {
                <span class="keyword">return</span>;
            }
        } <span class="keyword">else</span> {
            <span class="keyword">return</span>;
        }
        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; testTypes.length; i += <span class="number">1</span>) {
            <span class="keyword">if</span> (u.indexOf(types, testTypes[i]) !== -<span class="number">1</span>) {
                <span class="keyword">return</span> <span class="literal">true</span>;
            }
        }
        <span class="keyword">return</span> <span class="literal">false</span>;
    <span class="keyword">case</span> <span class="number">3</span>:
        <span class="keyword">if</span> (<span class="keyword">typeof</span> p3 === <span class="string">'string'</span>) {
            testTypes = [p3];
        } <span class="keyword">else</span> <span class="keyword">if</span> (p2.length) {
            testTypes = p3;
        } <span class="keyword">else</span> {
            <span class="keyword">return</span>;
        }
        <span class="keyword">if</span> (p1) {
            <span class="keyword">if</span> (p1[p2]) {
                <span class="keyword">if</span> (p1[p2][<span class="number">0</span>]) {
                    <span class="keyword">if</span> (p1[p2][<span class="number">0</span>][<span class="string">"@type"</span>]) {
                        <span class="keyword">if</span> (<span class="keyword">typeof</span> p1[p2][<span class="number">0</span>][<span class="string">"@type"</span>] === <span class="string">'string'</span>) {
                            types = [p1[p2][<span class="number">0</span>][<span class="string">"@type"</span>]];
                        } <span class="keyword">else</span> <span class="keyword">if</span> (p1[p2][<span class="number">0</span>][<span class="string">"@type"</span>].length) {
                            types = p1[p2][<span class="number">0</span>][<span class="string">"@type"</span>];
                        }
                    } <span class="keyword">else</span> {
                        <span class="keyword">return</span>;
                    }
                } <span class="keyword">else</span> {
                    <span class="keyword">return</span>;
                }
            } <span class="keyword">else</span> {
                <span class="keyword">return</span>;
            }
        } <span class="keyword">else</span> {
            <span class="keyword">return</span>;
        }
        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; testTypes.length; i += <span class="number">1</span>) {
            <span class="keyword">if</span> (u.indexOf(types, testTypes[i]) !== -<span class="number">1</span>) {
                <span class="keyword">return</span> <span class="literal">true</span>;
            }
        }
        <span class="keyword">return</span> <span class="literal">false</span>;
    }
} <span class="comment">//isType</span>

module.exports = {
    createV: createV,
    createN: createN,
    createL: createL,
    getV: getV,
    getA: getA,
    getN: getN,
    getI: getI,
    setV: setV,
    setN: setN,
    setL: setL,
    setS: setS,
    addTo: addTo,
    subFrom: subFrom,
    equalV: equalV,
    equalN: equalN,
    pushL: pushL,
    applyFunc: applyFunc,
    isIn: isIn,
    isType: isType
};</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
